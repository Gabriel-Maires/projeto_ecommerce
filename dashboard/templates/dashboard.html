{% extends 'base_dashboard.html' %}
{% load static %}

{% block head %}
<link rel="stylesheet" href="{% static 'css/dashboard.css' %}">
{% endblock %}

{% block dashboard %}
 <div class="container-md gx-5">
    
    <div class="row align-items-center">
        <div class="col-md-6 align-self-center">
              <div class="card border-dark mb-3">
                    <div class="card border-dark mb-3">
                      <div class="card-body text-dark">
                          Lucro total: <span id="lucro_total">R$ 0</span>
                      </div>
                    </div>
              
                <div class="card-body text-dark">
                    <canvas id="faturamento_mensal"></canvas>
                </div>
              </div>

        </div>

        <div class="col-6 align-self-center">

            <div class="card border-dark mb-3" style="max-width: 20em;">

                <div class="">
                  <div class="card border-dark mb-3">
                      <div class="card-body text-dark">
                          PRODUTOS EM ALTA
                      </div>
                    </div>
                </div>

                <div class="card-body text-dark">
                  <div class="chart">
                    <canvas id="relatorio_produtos"></canvas>
                  </div>
                </div>
              
            </div>

        </div>

    </div>

    <div class="row align-items-center ">
      <div class="col-md-6 align-self-center">
            <div class="card border-dark mb-3">
                  <div class="card border-dark mb-3">
                    <div class="card-body text-dark">
                        Lucros:
                    </div>
                  </div>
            
              <div class="card-body text-dark">
                  <canvas id="lucro"></canvas>
              </div>
            </div>

      </div>

  </div>
 </div>

 <script src="{% static 'js/canvas.js' %}"></script>
 <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>

 <script>
    url_total_vendido = '{% url "retorna_total_vendido" %}'
    url_despesas_mensais = '{% url "relatorio_faturamento" %}'
    url_relatorio_produtos = '{% url "relatorio_produto" %}'

    window.onload = function (event){
        retorna_total_vendido(url_total_vendido)
        renderiza_faturamento_mensais(url_despesas_mensais)
        relatorio_produtos(url_relatorio_produtos)
}

 </script>

{% endblock %}

<!-- Bootstrap core JS-->
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/js/bootstrap.bundle.min.js"></script>
<!-- Core theme JS-->
<script src="{% static 'js/scripts.js' %}"></script>


